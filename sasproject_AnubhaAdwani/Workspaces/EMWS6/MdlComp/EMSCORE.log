*------------------------------------------------------------*
* Score Log
Date:                December 08, 2017
Time:                15:47:44
*------------------------------------------------------------*
NOTE: View EMWS6.TREE2_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
      
NOTE: View EMWS6.TREE2_TRAIN.VIEW used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      
11661  /* Generate assessment metadata, which will be used to generate assessment data step */
11662  /* code, such as retrieving names of temporary variables and summary variables,      */
11663  /* labels, etc.  It is used in almost all the assessment computations such as lift,  */
11664  /* roc, index, scoreDist and could be thought as a global variable in assessment     */
11665  /* computation.                                                                      */
11666  data work.ASSESS_396BXRP_assessMeta__RvHne;
11667  length VARIABLE $32 FORMAT $44 TYPE $32 PARENT $32 LEVEL $32 PROPERTY $32 MEASUREMENT
11667! $10 LAST_LEVEL $32 GEN_VAR_IN_TEMP_DATA $32 RESULT_MEAN $32 RESULT_MEAN_LABEL $100
11667! RESULT_MIN $32 RESULT_MIN_LABEL $100 MIN_ADJUSTED $32 RESULT_MAX $32 RESULT_MAX_LABEL
11668     $100 MAX_ADJUSTED $32 RESULT_COUNT $32 RESULT_COUNT_LABEL $100 TEMPORARY_VARIABLE $32
11668! ;
11669  VARIABLE = "TargetBuy";
11670  PARENT = "";
11671  FORMAT = "";
11672  TYPE = "";
11673  LEVEL = '';
11674  PROPERTY = "TARGET";
11675  MEASUREMENT = "BINARY";
11676  LAST_LEVEL = '';
11677  GEN_VAR_IN_TEMP_DATA = "TargetBuy";
11678  RESULT_MEAN = "";
11679  RESULT_MEAN_LABEL = "";
11680  RESULT_MIN = "";
11681  RESULT_MIN_LABEL = "";
11682  MIN_ADJUSTED = "";
11683  RESULT_MAX = "";
11684  RESULT_MAX_LABEL = "";
11685  MAX_ADJUSTED = "";
11686  RESULT_COUNT = "";
11687  RESULT_COUNT_LABEL = "";
11688  TEMPORARY_VARIABLE = "TargetBuy__Peb8oNClmTiNSC";
11689  output;
11690  VARIABLE = "F_TargetBuy_1";
11691  FORMAT = "";
11692  TYPE = "";
11693  PARENT = "F_TargetBuy";
11694  LEVEL = "1";
11695  PROPERTY = "TARGET_LEVEL";
11696  MEASUREMENT = "INTERVAL";
11697  LAST_LEVEL = "0";
11698  GEN_VAR_IN_TEMP_DATA = "F_TargetBuy_1_fl3iP3nRWcuVsAt";
11699  RESULT_MEAN = "F_TargetBu_mean_vFo2TiTjPjXiz07";
11700  /* adjust for tied cases */
11701  RESULT_MEAN_LABEL = "";
11702  RESULT_MIN = "";
11703  RESULT_MIN_LABEL = "";
11704  RESULT_MAX = "";
11705  RESULT_MAX_LABEL = "";
11706  RESULT_COUNT = "NumberOfEvents";
11707  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
11708  TEMPORARY_VARIABLE = "F_TargetBuy_1_aJIHbCCh1ifnU_b";
11709  output;
11710  VARIABLE = "F_TargetBuy_0";
11711  FORMAT = "";
11712  TYPE = "";
11713  PARENT = "F_TargetBuy";
11714  LEVEL = "0";
11715  PROPERTY = "TARGET_LEVEL";
11716  MEASUREMENT = "INTERVAL";
11717  LAST_LEVEL = "0";
11718  GEN_VAR_IN_TEMP_DATA = "F_TargetBuy_0_RIyXewdXyH66PDr";
11719  RESULT_MEAN = "F_TargetBu_mean_uYzXKpq9RTp8aVw";
11720  /* adjust for tied cases */
11721  RESULT_MEAN_LABEL = "";
11722  RESULT_MIN = "";
11723  RESULT_MIN_LABEL = "";
11724  RESULT_MAX = "";
11725  RESULT_MAX_LABEL = "";
11726  RESULT_COUNT = "NumberOfEvents";
11727  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
11728  TEMPORARY_VARIABLE = "F_TargetBuy_0_TYh3MMyjhODQHfo";
11729  output;
11730  VARIABLE = "P_TargetBuy1";
11731  FORMAT = "";
11732  TYPE = "";
11733  PARENT = "";
11734  LEVEL = "1";
11735  PROPERTY = "POSTERIOR_LEVEL";
11736  MEASUREMENT = "INTERVAL";
11737  LAST_LEVEL = "";
11738  GEN_VAR_IN_TEMP_DATA = "P_TargetBuy1";
11739  RESULT_MEAN = "_meanP_";
11740  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
11741  RESULT_MIN = "_minP_";
11742  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
11743  MIN_ADJUSTED = "P_Target_minAdjusted_SwWECfQlz";
11744  RESULT_MAX = "_maxP_";
11745  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
11746  MAX_ADJUSTED = "P_Target_maxAdjusted_WeX2oCHV2";
11747  RESULT_COUNT = "";
11748  RESULT_COUNT_LABEL = "";
11749  TEMPORARY_VARIABLE = "P_TargetBuy1_UMLYgxtKOotLRMB";
11750  output;
11751  VARIABLE = "P_TargetBuy0";
11752  FORMAT = "";
11753  TYPE = "";
11754  PARENT = "";
11755  LEVEL = "0";
11756  PROPERTY = "POSTERIOR_LEVEL";
11757  MEASUREMENT = "INTERVAL";
11758  LAST_LEVEL = "";
11759  GEN_VAR_IN_TEMP_DATA = "P_TargetBuy0";
11760  RESULT_MEAN = "_meanP_";
11761  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
11762  RESULT_MIN = "_minP_";
11763  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
11764  MIN_ADJUSTED = "P_Target_minAdjusted_j7yR2jfIw";
11765  RESULT_MAX = "_maxP_";
11766  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
11767  MAX_ADJUSTED = "P_Target_maxAdjusted_pWOPeaPVN";
11768  RESULT_COUNT = "";
11769  RESULT_COUNT_LABEL = "";
11770  TEMPORARY_VARIABLE = "P_TargetBuy0_KAw08qWXGs3_thb";
11771  output;
11772  run;

NOTE: The data set WORK.ASSESS_396BXRP_ASSESSMETA__RVHNE has 5 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

11773  /* Generate temporary dataset and obtain summary statistics such as total number of   */
11774  /* obserations, frequency of target.  However, summary statistics for class reporting */
11775  /* variabels are not computed here since if there exist class reporting variables,    */
11776  /* then PROC DMDB will be called. And there is no need to compute interval reporting  */
11777  /* summary statisitcs, if any.                                                        */
11778  data work.ASSESS_396BXRP_normSD_L4aMrs(drop=
11779  _numberOfObservation_
11780  _levelFrequency_1
11781  _levelFrequency_2
11782  )
11783  work.ASSESS_396BXRP_meansAndTi_3UM7Uz (keep=
11784  _numberOfObservation_
11785  _levelFrequency_1
11786  _levelFrequency_2
11787  );
11788  set EMWS6.Tree2_TRAIN(
11789  where=(
11790  (TargetBuy ^= .)
11791  )
11792  ) end=_lastObservation_;
11793  keep frequency_4LzWLU;
11794  frequency_4LzWLU = 1;
11795  keep I_TargetBuy F_TargetBuy;
11796  keep F_TargetBuy_1_fl3iP3nRWcuVsAt;
11797  if (F_TargetBuy = '1') then do;
11798  F_TargetBuy_1_fl3iP3nRWcuVsAt = 1;
11799  end;
11800  else do;
11801  F_TargetBuy_1_fl3iP3nRWcuVsAt = 0;
11802  end;
11803  keep F_TargetBuy_0_RIyXewdXyH66PDr;
11804  if (F_TargetBuy = '0') then do;
11805  F_TargetBuy_0_RIyXewdXyH66PDr = 1;
11806  end;
11807  else do;
11808  F_TargetBuy_0_RIyXewdXyH66PDr = 0;
11809  end;
11810  keep P_TargetBuy1;
11811  keep P_TargetBuy0;
11812  output work.ASSESS_396BXRP_normSD_L4aMrs;
11813  keep _numberOfObservation_;
11814  retain _numberOfObservation_ 0;
11815  _numberOfObservation_ + frequency_4LzWLU;
11816  keep _levelFrequency_1;
11817  retain _levelFrequency_1 0;
11818  if (F_TargetBuy = '1') then do;
11819  _levelFrequency_1 + frequency_4LzWLU;
11820  end;
11821  keep _levelFrequency_2;
11822  retain _levelFrequency_2 0;
11823  if (F_TargetBuy = '0') then do;
11824  _levelFrequency_2 + frequency_4LzWLU;
11825  end;
11826  if _lastObservation_ then do;
11827  output work.ASSESS_396BXRP_meansAndTi_3UM7Uz;
11828  end;
11829  run;

NOTE: Variable _WARN_ is uninitialized.
NOTE: View EMWS6.TREE2_TRAIN.VIEW used (Total process time):
      real time           0.25 seconds
      cpu time            0.20 seconds
      
NOTE: There were 14445 observations read from the data set EMWS6.PART_TRAIN.
NOTE: There were 14445 observations read from the data set EMWS6.TREE2_TRAIN.
      WHERE TargetBuy not = .;
NOTE: The data set WORK.ASSESS_396BXRP_NORMSD_L4AMRS has 14445 observations and 7 variables.
NOTE: The data set WORK.ASSESS_396BXRP_MEANSANDTI_3UM7UZ has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.27 seconds
      cpu time            0.21 seconds
      

11830  data WORK._EMRANK;
11831  set EMWS6.MdlComp_EMRANK;
11832  where MODEL = "Tree2" and TARGET = "TargetBuy" and dataRole="TRAIN";
11833  run;

NOTE: There were 20 observations read from the data set EMWS6.MDLCOMP_EMRANK.
      WHERE (MODEL='Tree2') and (TARGET='TargetBuy') and (dataRole='TRAIN');
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

11834  data work._augment;
11835  do BIN= 1 to 20;
11836  DECILE = BIN*5;
11837  output;
11838  end;
11839  run;

NOTE: The data set WORK._AUGMENT has 20 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11840  data WORK._EMRANK;
11841  merge WORK._AUGMENT WORK._EMRANK;
11842  by BIN;
11843  run;

NOTE: There were 20 observations read from the data set WORK._AUGMENT.
NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

11844  data WORK._EMRANK;
11845  set WORK._EMRANK end=_lastObservation_;
11846  retain _previousMinP_ _previousMaxP_;
11847  retain _group_ 1;
11848  keep event;
11849  keep bin _cutoff_ _group_;
11850  if (bin > 1) then do;
11851  bin = bin - 1;
11852  _cutoff_ = (_maxP_ + _previousMinP_) / 2;
11853  if (abs(_previousMaxP_ - _previousMinP_) < 1E-6) then do;
11854  /* tied */
11855  _cutoff_ = max((_minP_ + _maxP_)/2, min(_cutoff_, _previousMinP_/*-1E-6*/
11856  ));
11857  end;
11858  else if (abs(_maxP_ - _minP_) < 1E-6) then do;
11859  /* next tied */
11860  _cutoff_ = min((_previousMinP_ + _previousMaxP_)/2, max(_cutoff_, _maxP_/*+ 1E-6*/
11861  ));
11862  end;
11863  output;
11864  *if ( abs((_maxP_ +_minP_)/2 - (_previousMaxP_ + _previousMinP_)/2) > 1E-6) then do;
11865  * _group_ + 1;
11866  *end;
11867  if (_maxP_ le _previousMinP_ - 1E-6) then do;
11868  _group_ + 1;
11869  end;
11870  else if (abs(_maxP_ - _previousMinP_) < 1E-6) then do;
11871  if (abs(_maxP_ - _minP_) > 1E-6) then do;
11872  _group_ + 1;
11873  end;
11874  end;
11875  bin + 1;
11876  /* correct the previous change */
11877  end;
11878  if (_lastObservation_) then do;
11879  _cutoff_ = .;
11880  output;
11881  end;
11882  _previousMinP_ = _minP_;
11883  _previousMaxP_ = _maxP_;
11884  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11885  data WORK._EMRANK;
11886  set WORK._EMRANK;
11887  by _group_;
11888  retain _start_;
11889  if (first._group_) then do;
11890  _start_ = _n_;
11891  end;
11892  if (last._group_) then do;
11893  _end_ = _n_;
11894  output;
11895  end;
11896  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 8 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of 
      this session.
11897  filename emflow "\\filer.uncc.edu\home\aadwani\SAS project\sas
11897! project\Workspaces\EMWS6\MdlComp\EMFLOWSCORE.sas";
11898  *------------------------------------------------------------*;
11899  * MdlComp: Scoring TREE2_TRAIN data;
11900  *------------------------------------------------------------*;
11901  data EMWS6.MdlComp_TRAIN
11902  / view=EMWS6.MdlComp_TRAIN
11903  ;
11904  set EMWS6.Tree2_TRAIN
11905  ;
11906  %inc emflow;
11941  run;

NOTE: DATA STEP view saved on file EMWS6.MDLCOMP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS6.TREE2_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
      

11942  quit;
11943  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

11944  filename emflow "\\filer.uncc.edu\home\aadwani\SAS project\sas
11944! project\Workspaces\EMWS6\MdlComp\EMFLOWSCORE.sas";
11945  *------------------------------------------------------------*;
11946  * MdlComp: Scoring TREE2_VALIDATE data;
11947  *------------------------------------------------------------*;
11948  data EMWS6.MdlComp_VALIDATE
11949  / view=EMWS6.MdlComp_VALIDATE
11950  ;
11951  set EMWS6.Tree2_VALIDATE
11952  ;
11953  %inc emflow;
11988  run;

NOTE: DATA STEP view saved on file EMWS6.MDLCOMP_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS6.TREE2_VALIDATE.VIEW used (Total process time):
      real time           0.13 seconds
      cpu time            0.03 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.15 seconds
      cpu time            0.04 seconds
      

11989  quit;
11990  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

11991  *------------------------------------------------------------*;
11992  * MdlComp: Computing metadata for TRAIN data;
11993  *------------------------------------------------------------*;

NOTE: View EMWS6.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
      
NOTE: View EMWS6.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
      
NOTE: View EMWS6.MDLCOMP_VALIDATE.VIEW used (Total process time):
      real time           0.07 seconds
      cpu time            0.04 seconds
      
